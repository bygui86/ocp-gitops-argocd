apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  labels:
{{ include "springboot-tekton.labels" . | nindent 4 }}
  name: deploy
spec:
  workspaces:
    - name: output-area
  params:
    - description: The namespace we are tagging to
      name: toNamespace
      type: string
    - description: The image tag
      name: tag
      type: string
      default: latest
    - description: the deployment
      name: deployment-folder
      type: string
      default: manifests
  resources:
    inputs:
      - name: gitops-repo
        type: git
  steps:
  - name: test
    image: clamer/kikd:1.0.2
    workingDir: /workspace/gitops-repo
    # command: ["/bin/bash"]
    script: |
      cat /workspace/output-area/version &&
      ls $(params.deployment-folder)